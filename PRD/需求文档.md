# 打地鼠小游戏 — 前后端分离项目 PRD

## 项目概述

卡通风格打地鼠小游戏，前后端作为两个独立项目部署到 Dokploy，用于**测试独立服务之间的跨域通信**。

## 架构

| 项目 | 仓库 | 技术栈 | 端口 |
|------|------|--------|------|
| `dokploy-game-api` | GitHub 独立仓库 | FastAPI (Python) | 8000 |
| `dokploy-game-frontend` | GitHub 独立仓库 | HTML/CSS/JS + Nginx | 80 |

**通信方式**：前端通过环境变量 `API_BASE_URL` 配置后端域名，JavaScript fetch 调用后端 REST API，后端启用 CORS 允许跨域。

## 后端 API

| 端点 | 方法 | 描述 |
|------|------|------|
| `/api/health` | GET | 健康检查 |
| `/api/scores` | GET | 获取排行榜 Top 10 |
| `/api/scores` | POST | 提交分数 `{name, score, level}` |
| `/api/game/config` | GET | 获取游戏配置参数 |

## 前端功能

- 卡通风格打地鼠游戏（纯 CSS 绘制角色）
- 3×3 网格，地鼠随机弹出
- 限时挑战（默认 30 秒，倒计时 10 秒警告）
- 连击系统（连续命中加分，高连击触发屏幕震动）
- ✨ **特殊机制**：15% 概率出现“黄金地鼠”（出现时间短，命中得 50 分附加特效）
- 📊 **数据大盘**：实时展示总对局、全服最高、玩家总数、平均得分
- 📡 **最近动态**：滚动展示最近 5 场对局成绩
- 排行榜展示（从后端获取，展示前 10 名，高亮前三）
- 游戏结束自动放烟花庆祝，可提交大侠名号到后端

## 部署说明

### Dokploy 部署步骤

1. **部署后端**：创建 Application → GitHub 仓库 `dokploy-game-api` → 部署 → 设置域名
2. **部署前端**：创建 Application → GitHub 仓库 `dokploy-game-frontend` → 设置环境变量 `API_BASE_URL=http://后端域名` → 部署 → 设置域名
3. **验证**：访问前端域名，确认游戏可玩、排行榜数据来自后端
